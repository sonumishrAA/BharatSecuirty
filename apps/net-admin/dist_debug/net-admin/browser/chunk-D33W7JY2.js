import{a as O}from"./chunk-KX6J4G5N.js";import"./chunk-GY5U62TY.js";import"./chunk-RT5UYCHB.js";import{$a as _,Ab as o,Bb as E,Ia as M,Ib as F,Na as d,Oa as D,Va as x,_ as b,bb as w,d as h,fb as f,ha as m,ia as s,ib as g,jb as C,kb as i,lb as n,mb as S,qb as v,rb as p,sb as u}from"./chunk-V2IGFCHU.js";var P=(t,r)=>r.name;function y(t,r){t&1&&(i(0,"p",0),o(1,"Loading\u2026"),n())}function k(t,r){t&1&&(i(0,"p",0),o(1,"No items available"),n())}function T(t,r){if(t&1){let e=v();i(0,"div",3)(1,"div",4),S(2,"img",5),n(),i(3,"div",6)(4,"button",7),p("click",function(){let a=m(e).$implicit,c=u();return s(c.copyUrl(a.url))}),o(5,"\u{1F4CB}"),n(),i(6,"button",8),p("click",function(){let a=m(e).$implicit,c=u();return s(c.deleteFile(a.name,"covers"))}),o(7,"\u{1F5D1}\uFE0F"),n()()()}if(t&2){let e=r.$implicit;d(2),w("src",e.url,M)}}function V(t,r){t&1&&(i(0,"p",0),o(1,"No items available"),n())}function $(t,r){if(t&1){let e=v();i(0,"div",3)(1,"div",9)(2,"span"),o(3,"\u{1F4C4}"),n(),i(4,"small"),o(5),n()(),i(6,"div",6)(7,"button",7),p("click",function(){let a=m(e).$implicit,c=u();return s(c.copyUrl(a.url))}),o(8,"\u{1F4CB}"),n(),i(9,"button",8),p("click",function(){let a=m(e).$implicit,c=u();return s(c.deleteFile(a.name,"files"))}),o(10,"\u{1F5D1}\uFE0F"),n()()()}if(t&2){let e=r.$implicit;d(5),E(e.name)}}var B=(()=>{class t{constructor(e){this.mediaService=e,this.media=x({covers:[],files:[]}),this.loading=x(!0)}ngOnInit(){this.fetchMedia()}fetchMedia(){this.loading.set(!0),this.mediaService.getAll().subscribe({next:e=>{this.media.set(e),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})}copyUrl(e){return h(this,null,function*(){yield navigator.clipboard.writeText(e),alert("Copied")})}deleteFile(e,l){confirm("Delete permanently?")&&this.mediaService.delete(e,l).subscribe({next:()=>{this.fetchMedia()}})}getFilename(e){return e.split("/").pop()||""}static{this.\u0275fac=function(l){return new(l||t)(D(O))}}static{this.\u0275cmp=b({type:t,selectors:[["app-media"]],standalone:!0,features:[F],decls:20,vars:3,consts:[[1,"muted"],[1,"section"],[1,"media-grid"],[1,"media-card"],[1,"media-thumb"],["alt","",3,"src"],[1,"media-actions"],[3,"click"],[1,"danger",3,"click"],[1,"media-thumb","file"]],template:function(l,a){l&1&&(i(0,"div")(1,"h1"),o(2,"Media Library"),n(),i(3,"p",0),o(4,"All uploaded media (auto detected)"),n(),_(5,y,2,0,"p",0),i(6,"div",1)(7,"h3"),o(8,"\u{1F5BC} Cover Images"),n(),_(9,k,2,0,"p",0),i(10,"div",2),g(11,T,8,1,"div",3,P),n()(),i(13,"div",1)(14,"h3"),o(15,"\u{1F4CE} Files / PDFs"),n(),_(16,V,2,0,"p",0),i(17,"div",2),g(18,$,11,1,"div",3,P),n()()()),l&2&&(d(5),f(5,a.loading()?5:-1),d(4),f(9,a.media().covers.length===0?9:-1),d(2),C(a.media().covers),d(5),f(16,a.media().files.length===0?16:-1),d(2),C(a.media().files))},styles:["h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:6px}.section[_ngcontent-%COMP%]{margin-top:32px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:16px}.media-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:16px}.media-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:10px}.media-thumb[_ngcontent-%COMP%]{height:120px;border-radius:8px;overflow:hidden;background:#f1f5f9;display:flex;align-items:center;justify-content:center}.media-thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.media-thumb.file[_ngcontent-%COMP%]{flex-direction:column;gap:6px}.media-thumb.file[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px}.media-thumb.file[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#64748b;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:100%;padding:0 6px}.media-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.media-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 10px;font-size:14px}"]})}}return t})();export{B as MediaComponent};
