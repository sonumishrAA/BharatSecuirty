import{f as w}from"./chunk-YBAUDIUZ.js";import{a as F}from"./chunk-DZXTVIH6.js";import{c as S,e as E,j as k,t as L}from"./chunk-OBZSDWM5.js";import"./chunk-GY5U62TY.js";import"./chunk-RT5UYCHB.js";import{$a as h,Ab as i,Bb as l,Eb as y,Fb as O,Gb as v,Ib as D,Na as s,Oa as f,_ as C,fb as b,ha as g,ia as _,ib as x,jb as M,kb as t,lb as n,oc as U,qb as P,rb as u,sb as p}from"./chunk-V2IGFCHU.js";var T=(a,d)=>d.id;function I(a,d){if(a&1){let e=P();t(0,"tr",7),u("click",function(){let o=g(e).$implicit,c=p();return _(c.viewUser(o.id))}),t(1,"td")(2,"div",8)(3,"span",9),i(4),n(),t(5,"div")(6,"span",10),i(7),n(),t(8,"span",11),i(9),n()()()(),t(10,"td"),i(11),n(),t(12,"td"),i(13),n(),t(14,"td")(15,"span",12),i(16),n()(),t(17,"td"),i(18),n(),t(19,"td")(20,"div",13)(21,"button",14),u("click",function(o){let c=g(e).$implicit;return p().editUser(c.id),_(o.stopPropagation())}),i(22,"\u270F\uFE0F"),n(),t(23,"button",15),u("click",function(o){let c=g(e).$implicit;return p().deleteUser(c.id),_(o.stopPropagation())}),i(24,"\u{1F5D1}\uFE0F"),n()()()()}if(a&2){let e=d.$implicit,r=p();s(4),l((e.name||e.email)[0].toUpperCase()),s(3),l(e.name||"No Name"),s(2),l(e.email),s(2),l(e.company||"-"),s(2),l(e.phone||"-"),s(3),l(e.booking_count),s(2),l(r.formatDate(e.created_at))}}function V(a,d){a&1&&(t(0,"tr")(1,"td",16),i(2,"No users found"),n()())}function A(a,d){a&1&&(t(0,"tr")(1,"td",17),i(2,"Loading..."),n()())}var W=(()=>{class a{constructor(e,r){this.adminService=e,this.router=r,this.users=[],this.filteredUsers=[],this.isLoading=!0,this.searchQuery=""}ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading=!0,this.adminService.getUsers().subscribe({next:e=>{this.users=e,this.filteredUsers=e,this.isLoading=!1},error:e=>{console.error("Failed to load users",e),this.isLoading=!1}})}filterUsers(){let e=this.searchQuery.toLowerCase();this.filteredUsers=this.users.filter(r=>r.email.toLowerCase().includes(e)||r.name?.toLowerCase().includes(e)||r.company?.toLowerCase().includes(e))}viewUser(e){this.router.navigate(["/admin/users",e])}editUser(e){this.router.navigate(["/admin/users",e],{queryParams:{edit:"true"}})}deleteUser(e){confirm(`DANGER: Are you sure you want to DELETE THIS USER? 

This will permanently delete:
- The user account
- ALL their bookings
- ALL chat history

This action cannot be undone.`)&&this.adminService.deleteUser(e).subscribe({next:()=>{alert("User deleted successfully"),this.loadUsers()},error:r=>{console.error("Failed to delete user",r),alert("Failed to delete user")}})}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}static{this.\u0275fac=function(r){return new(r||a)(f(F),f(w))}}static{this.\u0275cmp=C({type:a,selectors:[["app-users"]],standalone:!0,features:[D],decls:27,vars:3,consts:[[1,"page-header"],[1,"search-box"],["type","text","placeholder","\u{1F50D} Search by name, email, company...",3,"ngModelChange","input","ngModel"],[1,"card"],[1,"table-container"],[1,"data-table"],[1,"clickable-row"],[1,"clickable-row",3,"click"],[1,"user-info"],[1,"avatar"],[1,"name"],[1,"email"],[1,"badge","count"],[1,"action-buttons"],["title","Edit User",1,"btn-icon","btn-edit",3,"click"],["title","Delete User",1,"btn-icon","btn-delete",3,"click"],["colspan","6",1,"empty-state"],["colspan","6",1,"loading-state"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"h2"),i(2,"\u{1F465} Client Users"),n(),t(3,"div",1)(4,"input",2),v("ngModelChange",function(m){return O(o.searchQuery,m)||(o.searchQuery=m),m}),u("input",function(){return o.filterUsers()}),n()()(),t(5,"div",3)(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th"),i(11,"\u{1F464} User"),n(),t(12,"th"),i(13,"\u{1F3E2} Company"),n(),t(14,"th"),i(15,"\u{1F4DE} Phone"),n(),t(16,"th"),i(17,"\u{1F4CB} Bookings"),n(),t(18,"th"),i(19,"\u{1F4C5} Joined"),n(),t(20,"th"),i(21,"Actions"),n()()(),t(22,"tbody"),x(23,I,25,7,"tr",6,T),h(25,V,3,0,"tr")(26,A,3,0,"tr"),n()()()()),r&2&&(s(4),y("ngModel",o.searchQuery),s(19),M(o.filteredUsers),s(2),b(25,o.filteredUsers.length===0&&!o.isLoading?25:-1),s(),b(26,o.isLoading?26:-1))},dependencies:[U,L,S,E,k],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #d1d5db;border-radius:.5rem;width:300px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.card[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;box-shadow:0 1px 3px #0000001a;overflow:hidden}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.875rem}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f9fafb}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;font-weight:500;color:#6b7280}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9fafb}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.clickable-row[_ngcontent-%COMP%]{cursor:pointer}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;vertical-align:middle}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.user-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#2563eb;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600}.user-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:block;font-weight:500}.user-info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6b7280}.badge.count[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af;padding:.25rem .5rem;border-radius:9999px;font-size:.75rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1rem;transition:all .2s}.btn-icon.btn-edit[_ngcontent-%COMP%]{background:#eff6ff;color:#2563eb}.btn-icon.btn-edit[_ngcontent-%COMP%]:hover{background:#dbeafe}.btn-icon.btn-delete[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.btn-icon.btn-delete[_ngcontent-%COMP%]:hover{background:#fee2e2}.empty-state[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem!important;color:#6b7280}"]})}}return a})();export{W as UsersComponent};
