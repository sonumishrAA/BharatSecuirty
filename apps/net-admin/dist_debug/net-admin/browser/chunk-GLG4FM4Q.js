import{a as j}from"./chunk-GY5U62TY.js";import{b as B}from"./chunk-RT5UYCHB.js";import{$a as h,Ab as a,Bb as d,Cb as y,Ia as k,Ib as u,Na as r,R as F,W as I,X as M,_ as b,bb as v,db as _,eb as z,fb as g,gb as $,ha as O,hb as E,ia as S,ib as s,jb as m,kb as n,lb as i,mb as T,oc as C,qb as D,rb as x,sb as p}from"./chunk-V2IGFCHU.js";var P=(()=>{class e{constructor(t){this.http=t,this.apiUrl=`${j.apiUrl}/admin/system`}getRoutes(){return this.http.get(`${this.apiUrl}/routes`)}getTables(){return this.http.get(`${this.apiUrl}/tables`)}getTableData(t){return this.http.get(`${this.apiUrl}/tables/${t}`)}getFiles(){return this.http.get(`${this.apiUrl}/files`)}static{this.\u0275fac=function(o){return new(o||e)(I(B))}}static{this.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var R=(e,l)=>l.method+l.path;function Y(e,l){e&1&&(n(0,"span",6),a(1,"Admin"),i())}function G(e,l){e&1&&(n(0,"span",7),a(1,"Auth"),i())}function L(e,l){e&1&&(n(0,"span",8),a(1,"Public"),i())}function H(e,l){if(e&1&&(n(0,"tr")(1,"td")(2,"span",4),a(3),i()(),n(4,"td",5),a(5),i(),n(6,"td"),h(7,Y,2,0,"span",6)(8,G,2,0)(9,L,2,0),i()()),e&2){let t=l.$implicit,o=p();_("admin-route",t.path.includes("admin")),r(2),z(o.getBadgeClass(t.method)),r(),d(t.method),r(2),d(t.path),r(2),g(7,t.path.includes("admin")?7:t.path.includes("auth")?8:9)}}var A=(()=>{class e{constructor(){this.systemService=M(P),this.routes=[]}ngOnInit(){this.systemService.getRoutes().subscribe(t=>{this.routes=t.sort((o,c)=>o.path.localeCompare(c.path))})}getBadgeClass(t){return t}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-api-map"]],standalone:!0,features:[u],decls:16,vars:0,consts:[[1,"api-map-container"],[1,"table-responsive"],[1,"data-table"],[3,"admin-route"],[1,"badge"],[1,"code-font"],[1,"tag","admin"],[1,"tag","auth"],[1,"tag","public"]],template:function(o,c){o&1&&(n(0,"div",0)(1,"h3"),a(2,"API Routes"),i(),n(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th"),a(8,"Method"),i(),n(9,"th"),a(10,"Path"),i(),n(11,"th"),a(12,"Type"),i()()(),n(13,"tbody"),s(14,H,10,7,"tr",3,R),i()()()()),o&2&&(r(14),m(c.routes))},dependencies:[C],styles:[".api-map-container[_ngcontent-%COMP%]{padding:20px;background:#1e293b;border-radius:8px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;color:#e2e8f0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #334155}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#94a3b8;font-weight:600;font-size:.85rem;text-transform:uppercase;letter-spacing:.05em}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:700}.badge.GET[_ngcontent-%COMP%]{background:#0ea5e9;color:#fff}.badge.POST[_ngcontent-%COMP%]{background:#22c55e;color:#fff}.badge.PUT[_ngcontent-%COMP%]{background:#f59e0b;color:#fff}.badge.DELETE[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.code-font[_ngcontent-%COMP%]{font-family:monospace;color:#cbd5e1}.tag[_ngcontent-%COMP%]{padding:2px 6px;border-radius:4px;font-size:.7rem;border:1px solid currentColor}.tag.admin[_ngcontent-%COMP%]{color:#f472b6;border-color:#f472b6}.tag.auth[_ngcontent-%COMP%]{color:#fbbf24;border-color:#fbbf24}.tag.public[_ngcontent-%COMP%]{color:#94a3b8;border-color:#94a3b8}.admin-route[_ngcontent-%COMP%]{background:#f472b60d}"]})}}return e})();function J(e,l){if(e&1){let t=D();n(0,"li",5),x("click",function(){let c=O(t).$implicit,f=p();return S(f.loadTable(c))}),n(1,"span",6),a(2,"\u{1F4C4}"),i(),a(3),i()}if(e&2){let t=l.$implicit,o=p();_("active",o.currentTable===t),r(3),y(" ",t," ")}}function K(e,l){e&1&&(n(0,"div",10),a(1,"Loading data..."),i())}function q(e,l){e&1&&(n(0,"div",11),a(1,"No records found"),i())}function Q(e,l){if(e&1&&(n(0,"th"),a(1),i()),e&2){let t=l.$implicit;r(),d(t)}}function W(e,l){if(e&1&&(n(0,"td",13)(1,"div",14),a(2),i()()),e&2){let t=l.$implicit,o=p().$implicit,c=p(3);v("title",o[t]),r(2),d(c.formatValue(o[t]))}}function X(e,l){if(e&1&&(n(0,"tr"),s(1,W,3,2,"td",13,E),i()),e&2){let t=p(3);r(),m(t.columns)}}function Z(e,l){if(e&1&&(n(0,"table",12)(1,"thead")(2,"tr"),s(3,Q,2,1,"th",null,E),i()(),n(5,"tbody"),s(6,X,3,0,"tr",null,$),i()()),e&2){let t=p(2);r(3),m(t.columns),r(3),m(t.tableData)}}function ee(e,l){if(e&1&&(n(0,"div",7)(1,"h3"),a(2),i(),n(3,"span",8),a(4),i()(),n(5,"div",9),h(6,K,2,0,"div",10)(7,q,2,0)(8,Z,8,0),i()),e&2){let t=p();r(2),d(t.currentTable),r(2),y("",t.tableData.length," records (showing 100 max)"),r(2),g(6,t.loading?6:t.tableData.length===0?7:8)}}function te(e,l){e&1&&(n(0,"div",15)(1,"span",6),a(2,"\u2B05\uFE0F"),i(),n(3,"p"),a(4,"Select a table to view data"),i()())}var U=(()=>{class e{constructor(){this.systemService=M(P),this.tables=[],this.currentTable="",this.tableData=[],this.columns=[],this.loading=!1}ngOnInit(){this.systemService.getTables().subscribe(t=>{this.tables=t})}loadTable(t){this.currentTable=t,this.loading=!0,this.tableData=[],this.columns=[],this.systemService.getTableData(t).subscribe({next:o=>{this.tableData=o,o.length>0&&(this.columns=Object.keys(o[0])),this.loading=!1},error:()=>this.loading=!1})}formatValue(t){return t==null?"-":typeof t=="object"?JSON.stringify(t):String(t)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-db-explorer"]],standalone:!0,features:[u],decls:10,vars:1,consts:[[1,"db-explorer"],[1,"db-sidebar"],[1,"table-list"],[3,"active"],[1,"db-content"],[3,"click"],[1,"icon"],[1,"table-header"],[1,"count"],[1,"data-grid-wrapper"],[1,"loading"],[1,"empty"],[1,"data-table"],[3,"title"],[1,"cell-content"],[1,"empty-state"]],template:function(o,c){o&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),a(3,"Tables"),i(),n(4,"ul",2),s(5,J,4,3,"li",3,E),i()(),n(7,"div",4),h(8,ee,9,3)(9,te,5,0),i()()),o&2&&(r(5),m(c.tables),r(3),g(8,c.currentTable?8:9))},dependencies:[C],styles:[".db-explorer[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr;gap:20px;height:calc(100vh - 140px)}.db-sidebar[_ngcontent-%COMP%]{background:#1e293b;border-radius:8px;padding:15px;overflow-y:auto}.db-sidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#94a3b8;font-size:.8rem;text-transform:uppercase;margin-bottom:15px;letter-spacing:.1em}.table-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.table-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 12px;border-radius:6px;cursor:pointer;color:#cbd5e1;margin-bottom:4px;transition:all .2s;font-size:.9rem;display:flex;align-items:center;gap:8px}.table-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#334155;color:#fff}.table-list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#0ea5e9;color:#fff}.db-content[_ngcontent-%COMP%]{background:#1e293b;border-radius:8px;overflow:hidden;display:flex;flex-direction:column}.table-header[_ngcontent-%COMP%]{padding:15px 20px;border-bottom:1px solid #334155;display:flex;justify-content:space-between;align-items:center}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#fff}.count[_ngcontent-%COMP%]{font-size:.8rem;color:#94a3b8}.data-grid-wrapper[_ngcontent-%COMP%]{overflow:auto;flex:1;padding:0}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;white-space:nowrap;font-size:.85rem}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#0f172a;color:#94a3b8;padding:10px 15px;text-align:left;z-index:10;border-bottom:1px solid #334155}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 15px;border-bottom:1px solid #334155;max-width:300px;color:#cbd5e1}.cell-content[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.empty-state[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#64748b}.empty-state[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px}"]})}}return e})();var V=(e,l)=>l.name;function ne(e,l){if(e&1){let t=D();n(0,"div",3)(1,"div",6)(2,"img",7),x("error",function(c){O(t);let f=p();return S(f.onImgError(c))}),i()(),n(3,"div",8)(4,"span",9),a(5),i(),n(6,"span",10),a(7),i()()()}if(e&2){let t=l.$implicit,o=p();r(2),v("src",t.url,k)("alt",t.name),r(2),v("title",t.name),r(),d(t.name),r(2),d(o.formatSize(t.size))}}function ie(e,l){e&1&&(n(0,"div",4),a(1,"No cover images"),i())}function oe(e,l){if(e&1&&(n(0,"div",5)(1,"div",11),a(2," \u{1F4C4} "),i(),n(3,"div",8)(4,"span",9),a(5),i(),n(6,"span",10),a(7),i(),n(8,"a",12),a(9,"Download"),i()()()),e&2){let t=l.$implicit,o=p();r(4),v("title",t.name),r(),d(t.name),r(2),d(o.formatSize(t.size)),r(),v("href",t.url,k)}}function ae(e,l){e&1&&(n(0,"div",4),a(1,"No other files"),i())}var N=(()=>{class e{constructor(){this.systemService=M(P),this.covers=[],this.files=[]}ngOnInit(){this.systemService.getFiles().subscribe(t=>{this.covers=t.covers||[],this.files=t.files||[]})}formatSize(t){if(!t)return"0 B";let o=1024,c=["B","KB","MB","GB"],f=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,f)).toFixed(2))+" "+c[f]}onImgError(t){t.target.src="assets/placeholder-tech.jpg"}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-file-explorer"]],standalone:!0,features:[u],decls:17,vars:4,consts:[[1,"file-explorer"],[1,"section"],[1,"file-grid"],[1,"file-card"],[1,"empty"],[1,"file-card","file-type"],[1,"preview"],["loading","lazy",3,"error","src","alt"],[1,"info"],[1,"name",3,"title"],[1,"size"],[1,"preview","icon-preview"],["target","_blank",1,"download-link",3,"href"]],template:function(o,c){o&1&&(n(0,"div",0)(1,"h3"),a(2,"File Storage (Uploads)"),i(),n(3,"div",1)(4,"h4"),a(5),i(),n(6,"div",2),s(7,ne,8,5,"div",3,V,!1,ie,2,0,"div",4),i()(),n(10,"div",1)(11,"h4"),a(12),i(),n(13,"div",2),s(14,oe,10,4,"div",5,V,!1,ae,2,0,"div",4),i()()()),o&2&&(r(5),y("Cover Images (",c.covers.length,")"),r(2),m(c.covers),r(5),y("Other Files (",c.files.length,")"),r(2),m(c.files))},dependencies:[C],styles:[".file-explorer[_ngcontent-%COMP%]{padding:20px;background:#1e293b;border-radius:8px;min-height:calc(100vh - 140px)}h3[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}h4[_ngcontent-%COMP%]{color:#94a3b8;margin:20px 0 10px;font-size:.9rem;text-transform:uppercase;border-bottom:1px solid #334155;padding-bottom:5px}.file-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px}.file-card[_ngcontent-%COMP%]{background:#0f172a;border-radius:8px;overflow:hidden;border:1px solid #334155;transition:transform .2s}.file-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);border-color:#0ea5e9}.preview[_ngcontent-%COMP%]{height:120px;background:#000;display:flex;align-items:center;justify-content:center;overflow:hidden}.preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.icon-preview[_ngcontent-%COMP%]{font-size:3rem;background:#1e293b}.info[_ngcontent-%COMP%]{padding:10px}.name[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#e2e8f0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px}.size[_ngcontent-%COMP%]{display:block;font-size:.7rem;color:#64748b}.download-link[_ngcontent-%COMP%]{display:block;margin-top:5px;font-size:.75rem;color:#0ea5e9;text-decoration:none}.download-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.empty[_ngcontent-%COMP%]{color:#64748b;font-style:italic;padding:20px}"]})}}return e})();function re(e,l){e&1&&T(0,"app-api-map")}function le(e,l){e&1&&T(0,"app-db-explorer")}function ce(e,l){e&1&&T(0,"app-file-explorer")}var ke=(()=>{class e{constructor(){this.activeTab="api"}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-system-dashboard"]],standalone:!0,features:[u],decls:17,vars:9,consts:[[1,"system-dashboard"],[1,"page-header"],[1,"tabs"],[3,"click"],[1,"tab-content"]],template:function(o,c){o&1&&(n(0,"div",0)(1,"header",1)(2,"h1"),a(3,"\u2699\uFE0F System Backend"),i(),n(4,"p"),a(5,"Explore internal APIs, Database Tables, and File Storage"),i()(),n(6,"div",2)(7,"button",3),x("click",function(){return c.activeTab="api"}),a(8," \u{1F50C} API Map "),i(),n(9,"button",3),x("click",function(){return c.activeTab="db"}),a(10," \u{1F4BE} Database "),i(),n(11,"button",3),x("click",function(){return c.activeTab="files"}),a(12," \u{1F4C1} File Storage "),i()(),n(13,"div",4),h(14,re,1,0,"app-api-map")(15,le,1,0,"app-db-explorer")(16,ce,1,0,"app-file-explorer"),i()()),o&2&&(r(7),_("active",c.activeTab==="api"),r(2),_("active",c.activeTab==="db"),r(2),_("active",c.activeTab==="files"),r(3),g(14,c.activeTab==="api"?14:-1),r(),g(15,c.activeTab==="db"?15:-1),r(),g(16,c.activeTab==="files"?16:-1))},dependencies:[C,A,U,N],styles:[".system-dashboard[_ngcontent-%COMP%]{padding:0}.page-header[_ngcontent-%COMP%]{padding:20px;background:#0f172a;margin-bottom:20px;border-radius:8px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#fff;display:flex;align-items:center;gap:10px}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;color:#94a3b8;font-size:.9rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:10px;padding:0 20px;margin-bottom:20px;border-bottom:1px solid #334155}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;padding:10px 20px;color:#94a3b8;font-weight:600;cursor:pointer;border-bottom:2px solid transparent;transition:all .2s}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#e2e8f0}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#0ea5e9;border-bottom-color:#0ea5e9}.tab-content[_ngcontent-%COMP%]{padding:0 20px;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]})}}return e})();export{ke as SystemComponent};
